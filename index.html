<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mattington's Marvelous Adventure!!!</title>
    <script src="./js/myFuncts.js"></script>
</head>

<!-- leave what is repeatable for now -->
<body>
<div id="counter">1</div>
<button onclick="showHide()">12345</button>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // const url_songs = "https://www.randyconnolly.com/funwebdev/3rd/api/music/songs-nested.php";
        const url_songs = "starting-files/sample-songs.json";
        const artistURL = "starting-files/artists.json"
        const artistSel = document.querySelector("#artistSearch");
        const songSel = document.querySelector("#songSearch")
        document.querySelector("#search-view").style.display = "block";
        //adds prompts

        // if (!doTheThing) {
        //     error handling
        // } else {//do the func};

        //Now Fetching
        fetch(artistURL)
            .then(response => response.json())
            //or function(response){return response.json};
            .then(data => { populateArtists(data) });

        const opt1 = document.createElement("option");
        opt1.textContent = "Pick an Artist";
        opt1.value = 0;
        artistSel.appendChild(opt1);

    }); //END-DOMContentLoaded

    //Populate those Artists Fields
    function populateArtists(artistData) {
        for (let c of artistData) {
            // let opt = makeOption(c);
            const opt = document.createElement("option");
            opt.textContent = c.name;
            opt.value = c.value;
            artistSel.appendChild(opt);
        } //End of options being populated

        artistSel.addEventListener("change", e => {
            //loads all the songs from 'e' artists into the songSel field
            populate.songs();
        })
    }
    function populateSongs() {
        //API QUERY STRING CONSTRUCTO-CON
        // if (!doTheThing) {
        //     error handling
        // } else {//do the func};
        const url1 = url_songs;
        // const url2 = url_songs + "?iso =" + artistSel.value;
        fetch(url1)
            .then(response => response.json())
            .then(songData => { populateSongSel(songData) })
        //add error handling try/catch bits 
    }
    function populateSongSel(songData) {
        for (let c of songData) {
            //make options
            let x = makeOption(c);
            songSel.appendChild(x);
        }
    };
    function makeOption(c) {
        const opt = document.createElement("option");
        opt.textContent = c.name;
        opt.value = c.value;
        return opt;
    }

    function eleMaker() {
        const tr1 = document.createElement("<tr>");
        const td1 = document.createElement("td");
        const td2 = document.createElement("td");
        const td3 = document.createElement("td");
        const td4 = document.createElement("td");
    }

    function showHide() {
        let x = document.querySelector("#search-view");
        let y = document.querySelector("#song-view");
        let z = document.querySelector("#playlist-view");
        // if ('class.displayer' > div === "search-view") {
        //     class.displayer = "#song-view";
        // }
        // else if ('class.displayer' > div === "#song-view") {
        //     class.displayer = "#playlist-view";
        // }
        // else ('class.displayer' > div === "#playlist-view") {
        //     class.displayer = "#search-view";
        // }
    }
        // if (x.style.display === "none") {
        //     x.style.display = "block";
        // } else {
        //     x.style.display = "none";
        // }



</script>

<div class="displayer" id="search-view"> <!-- SongSearchView -->
        <header id="head0">
            <h1>$Header</h1>
            
            <button>.onClick(GoToPlaylist)</button>
            <button>.onClick(GoToRepo) + :mouseover(CREDITS!)</button>
        </header>

        <!-- These sections will be replaced as the user does the navigating -->
        <section id="left1">
            <h1>Basic Search</h1>
            <form id="search-form" action="">
                <p>Search type:</p>
                <input type="radio" name="search-options" id="search-title">
                <label for="search-title">Song Title ${all.the.titles}(Dropdown)</label><br>
                <input type="radio" name="search-options" id="search-artist">
                <label for="search-options">Artist Name ${all.the.artists}</label><br>
                <input type="radio" name="search-options" id="search-genre">
                <label for="search-options">Genre ${all.the.genres}</label><br>
                <br>
                <input type="submit" value="Submit">
                <input type="reset" value="Clear">
                </form>

                <div id="searcher">
                    <select name="artistSearch" id="artistSearch" textContext="Pick"></select>
                    <select name="songSearch" id="songSearch"></select>
                </div>
        </section>
        <!-- this will be in that searchform once it's functional -->


            <section id="centre2">
                <h1>Browse/Search Results</h1>
                
        <table>
            <tr>
                <th>Title
                    
                </th>
                <th>Artist</th>
                <th>Year</th>
                <th>Genre</th>
                <th>Popularity</th>
                <th>Button</th>
            </tr>
            <!-- populateTable() -->
            <tr>
                <td>a</td>
                <td>b</td>
                <td>c</td>
                <td>d</td>
                <td>e</td>
                <td>
                    <div>button</div>
                    <!-- <div id="sortButtons">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <button id="sortASC" onClick="sortResultsAsc()">ASC</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <button id="sortDSC" onClick="sortResultsDsc()">DSC</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div> -->
                </td>
            </tr>
        </table>

            </section>
        <footer>
            <h2>FOOTER</h2>
        </footer>
    </div>

    <div class="displayer" id="song-view"> <!-- SingleSongView -->
        <header id="head0">
            <h1>$SingleSongView</h1>
            <button>.onClick(GoToPlaylist)</button>
            <button>.onClick(GoToRepo) + :mouseover(CREDITS!)</button>
            <button>.onlick(ToGoSearchBrowse) CLOSE</button>
        </header>


        <section id="left1">
            <h2>Song Information</h2>
            <!-- How to get this from the user. ex, use thier selection to load this -->
            <p>$song.title, $song.artist, $song.artist_type, $song.genre, $song.duration(in mins+secs)</p>

            <ul>
                <!-- (THIS IS WHERE WE WILL ADD JSON/API INFO ONCE WE GOT IT) -->
                <h2>Analysis Data</h2>
                <li>$song.bpm</li>
                <li>$song.energy</li>
                <li>$song.dancey</li>
                <li>$song.valence</li>
                <li>$song.acousticness</li>
                <li>$song.speechiness</li>
                <li>$song.popularity</li>
                </ul>



        </section>

        <section id="centre2">

            <div style="display: none;">
                <canvas id="myChart"> Chart: Exists but doesn't response to anything, yet</canvas>
            </div>
            <!-- Chart Base from: (https://www.chartjs.org)-->
            <div id="theChartBox">
                    <div>
                        <!-- <canvas id="myChart"></canvas> MOVED-->
                        </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    
                    <script>
                        const ctx = document.querySelector("#myChart");

                                new Chart(ctx, {
                                    type: 'radar',
                                    data: {
                                        labels: [
                                            'BPM',
                                            'Energy',
                                            'Danciness',
                                            'Valance',
                                            'Acousticness',
                                            'Speechiness',
                                            'Popularity'
                                        ],
                                        // (THIS IS WHERE WE WILL ADD THE JSON/API INFO ONCE WE GOT IT)
                                        datasets: [{
                                            label: '# OF DATA POINTS',
                                            data: [82, 59, 84, 41, 56, 52, 70],
                                            // data: [$song.bpm, $song.energy, $song.danceiness, $song.valance, 
                                            // $song.acousticness, $song.speechiness, $song.popularity],
                                            borderWidth: 1
                                        }]

                                },
                                options: {

                                    elements: {
                                        line: {
                                            borderWidth: 3
                                        }
                                    },
                                    scales: {
                                        r: {
                                            angleLines: {
                                                display: false
                                            },
                                            suggestedMin: 20,
                                            suggestedMax: 100
                                        }
                                    }
                                },
                            });
                                </script>
                            </div>
                            </section>

        <footer>
            <h2>FOOTER</h2>
        </footer>
    </div>

    <div class="displayer" id="playlist-view"> <!-- PlaylistView -->
        <header id="head0">
            <h1>$PlaylistView</h1>
            <!-- <button>.onClick(GoToPlaylist)</button> -->
            <button>.onClick(GoToRepo) + :mouseover(CREDITS!)</button>
            <button>.onlick(ToGoSearchBrowse) CLOSE</button>
        </header>

    <section id="left1">
        <div>
            <h1>Playlist Details</h1>
            <p>${#ofsongsinlist}</p>
            <p>${popularityrankings?}</p>
        </div>

    <table>
        <tr>
            <th>Title
                <!-- <div id="sortButtons">
                            <button id="sortASC" onClick="sortResultsAsc()">ASC</button>
                            <button id="sortDSC" onClick="sortResultsDsc()">DSC</button>
                        </div> -->
            </th>
            <th>Artist</th>
            <th>Year</th>
            <th>Genre</th>
            <th>Popularity</th>
            <th>""</th>
        </tr>
        <!-- forEachEntryinPlaylist -->
        <!-- createElement("<tr>");
                createElement("<td><a href="goToSongPage($t)">")
                        createElement("</a></td>")
                createElement("<td>a")
                    createElement("</a></td>") -->
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td><button>RMV</button></td>
        </tr>
        <!-- Endof"Loop" -->
        </table>

    </section>

    <section id="centre2">




    </section>

    <footer>
        <h2>FOOTER</h2>
    </footer>
    </div>

</body>
<!-- Putting Scripts Here -->
<script>
        // dropcode here
        // function dropFunction() {
        //     document.querySelector("#dropdownmenu");
        // }
        // // sortAsc
        // function sortResultsAsc() {
        //     document.querySelector("");
        //     //hidemybutton();
        // }
        // // sortDsc
        // //Shows up only if sortAsc is alread selected
        // function sortResultsDsc() {
        //     document.querySelector("");
        // }
        // //this funct will hide the clicked button and reveal the opposite
        // function hideMyButton() {
        //     let x = document.querySelector("#sortDSC");
        //     if (x.style.display === "none") {
        //         x.style.display = "block";
        //     } else {
        //         x.style.display = "none";
        //     }
        // }


</script>
<!-- Putting Styles Here -->
<style>
    
#search-view {
    display: block;
    width: 800px;
        display: inline-block;
        border-color: blue;
        border-style: dotted;
        border-width: 5px;
}
    
    #song-view, #playlist-view {
        width: 800px;
        display: inline-block;
        border-color: blue;
        border-style: dotted;
        border-width: 5px;
        display: none;
    }
    #head0{
        margin-bottom: 5px;
        position: relative;
        overflow: hidden;
        border: 3px;
        background-color: aquamarine;
    }
    #head0>button {
        float: right;
        height: 30px;
    }
    /* section {
        border-width: 1px;
        border-style: dashed;
    } */
    #left1 {
        width: 300px;
        height: 320px;
        display: inline-block;
        margin-right: 6px;
        border-color: crimson;
        border-style: dotted;
        border-width: 5px;
    }
    #centre2 {
        width: 300px;
        height: 320px;
        display: inline-block;
        margin-right: 6px;
        border-color: crimson;
        border-style: dotted;
        border-width: 5px;
    }
    footer {
        display: block;
        height: 100px;
        width: 100%;
        border: 5px;
        border-color: darkorange;
    }
    
</style>

</html>